<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Carrinho de Compras</title>
        
        <link rel="stylesheet" href="../css/style.css">
    </head>
    <body>
        <section class="cabeçalho">
            <!-- Navegação do site -->
            <nav>
                <a href="index.html"><img src="../assets/icons/logo.jpg"></a>
                <div class="barra_de_pesquisa">
                    <input type="text" placeholder="Pesquisar...">
                    <button type="button">
                        <img src="../assets/icons/lupa.png" alt="PERFIL">
                    </button>
                </div>
                <div class="barra_de_navegação">
                    <!-- Lista de links de navegação -->
                    <ul>
                        <li>
                            <a href="index.html#categorias">CATEGORIAS</a>
                        </li>
                        <li>
                            <a href="cadastro.login.html#login">
                                <button type="button">
                                    <img src="../assets/icons/user.jpg" alt="PERFIL">
                                </button>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </section> 

        <div class="cart">
            <div class="cart-header">
                <h2>Itens no Carrinho</h2>
            </div>
            
            <a href="#" class="clear-cart-btn" onclick="limparCarrinho()">Limpar Carrinho</a>
            <div id="feedback" class="added-to-cart"></div>

            <div class="cart-items" id="cart-items">
                <!-- Os itens do carrinho serão adicionados dinamicamente aqui -->
            </div>
            <div class="cart-total" id="cart-total">
                Total: R$ 0,00
            </div>
            <a href="#" class="checkout-btn">Finalizar Compra</a>
        </div>
        
        <script>
            function limparCarrinho() {
                localStorage.removeItem('carrinho');

                // Remova os itens da visualização na página
                var cartItemsContainer = document.getElementById('cart-items');
                while (cartItemsContainer.firstChild) {
                    cartItemsContainer.removeChild(cartItemsContainer.firstChild);
                }

                // Atualize o total
                var cartTotal = document.getElementById('cart-total');
                cartTotal.textContent = 'Total: R$ 0,00';

                // Feedback visual
                var feedback = document.getElementById('feedback');
                feedback.textContent = 'Carrinho limpo.';
                setTimeout(() => {
                    feedback.textContent = '';
                }, 2000);
            }
            // Função para carregar os itens do carrinho na página do carrinho
            window.onload = function () {
                var carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
                var cartItemsContainer = document.getElementById('cart-items');
                var cartTotal = document.getElementById('cart-total');

                carrinho.forEach(function (item) {
                    var itemElement = document.createElement('div');
                    itemElement.classList.add('item');
                    itemElement.innerHTML = `
                        <img src="${item.imagem}" alt="${item.nome}">
                        <div class="item-details">
                            <div class="item-name">${item.nome}</div>
                            <div class="item-price">R$ ${item.preco.toFixed(2)}</div>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemElement);
                });

                // Calcular e exibir o total
                var total = carrinho.reduce(function (acc, item) {
                    return acc + item.preco;
                }, 0);

                cartTotal.textContent = `Total: R$ ${total.toFixed(2)}`;
            };
        </script>
    </body>
</html>
